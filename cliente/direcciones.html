<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Direcciones - Pastelería El Caballo Goloso</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.0/mdb.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
    <link href="styles/main.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-body-tertiary">[...]</nav>
    
    <main class="container mt-5">
        <h1 class="text-center">Mis Direcciones</h1>
        <div class="d-flex">
            <nav class="me-4">
                <h3 class="text-danger">Sección</h3>
                <ul class="list-unstyled">
                    <li><a href="pedidos.html">Pedidos</a></li>
                    <li><a href="facturas.html">Facturas</a></li>
                    <li><a href="perfil.html">Perfil</a></li>
                    <li><strong>Direcciones</strong></li>
                    <li><a href="tarjetas.html">Tarjetas</a></li>
                    <li><a href="#">Darme de baja</a></li>
                    <li><a href="#">Salir</a></li>
                </ul>
            </nav>
            <div class="w-100">
                <div class="mt-4">
                    <h3>Direcciones Registradas</h3>
                    <button class="btn btn-success mb-3" onclick="abrirModalAgregar()" data-bs-toggle="modal" data-bs-target="#modalDireccion">Añadir Dirección</button>
                    <ul class="list-group" id="lista-direcciones">
                    </ul>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Modal para agregar/modificar dirección -->
    <div class="modal fade" id="modalDireccion" tabindex="-1" aria-labelledby="modalDireccionLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalDireccionLabel">Dirección</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="text" id="inputCalle" class="form-control mb-2" placeholder="Calle" />
                    <input type="text" id="inputCP" class="form-control mb-2" placeholder="Código Postal" />
                    <input type="text" id="inputProvincia" class="form-control mb-2" placeholder="Provincia" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" onclick="guardarDireccion()">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="text-center text-lg-start bg-body-tertiary text-muted mt-5">
        <div class="container text-center text-md-start mt-5">
            <div class="row">
                <div class="col-md-4 col-lg-3 mx-auto mb-4">
                    <h6 class="text-uppercase fw-bold mb-4">Contacto</h6>
                    <p><i class="fas fa-home me-3"></i>c/ Jose Sanchez Rubio, 2, Torrelodones</p>
                    <p><i class="fas fa-envelope me-3"></i> contacto@caballogoloso.com</p>
                    <p><i class="fas fa-phone me-3"></i>91 859 67 11</p>
                </div>
            </div>
        </div>
        <div class="text-center p-4" style="background-color: rgba(0, 0, 0, 0.05);">
            © 2025 Copyright:
            <a class="text-reset fw-bold" href="#">Pastelería El Caballo Goloso</a>
        </div>
    </footer>
    
    <script>
        let direccionEditando = null;
        
        function abrirModalAgregar() {
            direccionEditando = null;
            document.getElementById('inputCalle').value = '';
            document.getElementById('inputCP').value = '';
            document.getElementById('inputProvincia').value = '';
        }
        
        function guardarDireccion() {
            let calle = document.getElementById('inputCalle').value;
            let cp = document.getElementById('inputCP').value;
            let provincia = document.getElementById('inputProvincia').value;
            let lista = document.getElementById('lista-direcciones');
            
            if (!calle || !cp || !provincia) {
                alert("Por favor, completa todos los campos.");
                return;
            }
            
            if (direccionEditando) {
                direccionEditando.remove(); // Eliminar la dirección antigua
            }
            
            let nuevaDireccion = document.createElement('li');
            nuevaDireccion.classList.add('list-group-item', 'd-flex', 'justify-content-between', 'align-items-center');
            nuevaDireccion.innerHTML = `${calle}, ${cp}, ${provincia} <div>
                <button class='btn btn-sm btn-warning' onclick='editarDireccion(this)'>Modificar</button>
                <button class='btn btn-sm btn-danger' onclick='eliminarDireccion(this)'>Eliminar</button>
            </div>`;
            lista.appendChild(nuevaDireccion);
            
            direccionEditando = null;
            let modal = bootstrap.Modal.getInstance(document.getElementById('modalDireccion'));
            modal.hide();
        }
        
        function editarDireccion(btn) {
            direccionEditando = btn.parentElement.parentElement;
            let partes = direccionEditando.childNodes[0].textContent.split(',');
            document.getElementById('inputCalle').value = partes[0].trim();
            document.getElementById('inputCP').value = partes[1].trim();
            document.getElementById('inputProvincia').value = partes[2].trim();
            
            let modal = new bootstrap.Modal(document.getElementById('modalDireccion'));
            modal.show();
        }
        
        function eliminarDireccion(btn) {
            btn.parentElement.parentElement.remove();
        }
    </script>
</body>
</html>